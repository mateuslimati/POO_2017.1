<!doctype html public "-//w3c//dtd html 4.0 transitional//en">

<html>

<head>
   <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
   <title>astah*トータルマージユーティリティ利用ガイド</title>
</head>

<body>

<h1>astah*トータルマージユーティリティ利用ガイド</h1>
<P align="right">2012年3月22日更新<br>
株式会社チェンジビジョン</p>
<hr>
<h2>【概要】</h2>
astah*インストールフォルダに含まれるastah*トータルマージユーティリティ
(astah-runw.exe[※MacとLinuxではastah-run.sh])を利用することで、
コマンドライン上から参照プロジェクトの更新が可能になります。<br>
<ul>
<li><a href="#update">参照プロジェクトの更新</a>
<li><a href="#forced_update">強制的な参照プロジェクトの更新</a>
<li><a href="#preference">コマンドラインツールの設定</a>
</ul>

<hr>

<h2 id="update">【参照プロジェクトの更新】</h2>
ディレクトリを指定してupdate-allを実行することで、指定したディレクトリ配下に存在する*.astaファイル全てのうち、
参照プロジェクトの情報が更新されていないプロジェクトファイルに対して参照プロジェクトの更新を行います。
更新の有無はファイルのタイムスタンプで判定しますが、use-builtin-timestampまたはubtを指定することで、
プロジェクトに記憶したタイムスタンプで判定するように指定できます。<br>
出力先ディレクトリには、yyyyMMdd_HHmm_convert_command.logのファイル名でログが出力されます。<br>
<br>
<fieldset style="border:double">
<legend>Windowsで、参照プロジェクトを更新する例</legend>
<samp>astah-runw.exe "C:\workspace\astah" update-all</samp>
</fieldset>
<br>
<fieldset style="border:double">
<legend>Mac/Linuxで、プロジェクトに記憶したタイムスタンプを見て更新する例</legend>
<samp>astah-run.sh “~/workspace/astah” update-all use-builtin-timestamp</samp>
<hr>
<samp>astah-run.sh “~/workspace/astah” update-all ubt</samp>
</fieldset>
<br>

<hr>

<h2 id="forced_update">【強制的な参照プロジェクトの更新】</h2>
ディレクトリを指定してupdate-all-forceを実行することで、
指定したディレクトリ配下に存在する*.astaファイル全てのうち、
参照プロジェクトの情報を持つプロジェクトに対して強制的に参照プロジェクトを更新します。<br>
出力先ディレクトリにはyyyyMMdd_HHmm_convert_command.logのファイル名でログが出力されます。
<br>
<fieldset style="border:double">
<legend>Windowsで、参照プロジェクトを更新する例</legend>
<samp>astah-runw.exe "C:\workspace\astah" update-all-force</samp>
</fieldset>
<br>

<hr>

<h2 id="preference">【コマンドラインツールの設定】</h2>
コマンドラインツールの実行には、astah*の実行環境が必要です。
大きなサイズのプロジェクトファイルを扱う場合に、JavaVMのメモリ管理オプションの調整が必要なことがあります。 
スタックサイズは、astah*のシステムプロパティの設定値を使用します。
初期ヒープサイズと最大ヒープサイズは、以下のように設定してください。<br>
<br>
<fieldset style="border:double">
<legend>Windows環境 : astah-runw.l4j.iniの編集</legend>
[初期ヒープサイズ]<br>
<b>-Xms16m</b><br>
16mの部分がサイズ（この例では16Mバイト）になりますので、ファイルに含まれるこの部分を変更します。<br>
<br>
[最大ヒープサイズ]<br>
<b>-Xmx384m</b><br>
384mの部分がサイズ（この例では384Mバイト）になりますので、ファイルに含まれるこの部分を変更します。<br>
</fieldset>
<br>
<fieldset>
<legend>Mac/Linux環境 : astah-run.shの編集</legend>
[初期ヒープサイズ]<br>
<b>INITIAL_HEAP_SIZE=64m</b><br>
64mの部分がサイズ（この例では64Mバイト）になりますので、ファイルに含まれるこの部分を変更します。<br>
<br>
[最大ヒープサイズ]<br>
<b>MAXIMUM_HEAP_SIZE=1024m</b><br>
1024mの部分がサイズ（この例では1024Mバイト）になりますので、ファイルに含まれるこの部分を変更します。<br>
</fieldset>

</body>
</html>

